(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{65:function(e,t,n){"use strict";var o=n(4),i=n(14),s=n(15),a=n(35),r=n(17),u=n(19),c=n(0),l=n(41),p=n.n(l),f=n(23),h=n(105),d=n(97),m=n(34),v=n(43),b=n(200),O=n(2),g=n.n(O);function T(e,t,n){return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}var M=n(6),C=n(11),w=n(201),y=n(39);function k(e){var t=e.prefixCls,n=e.motion,o=e.animation,i=e.transitionName;return n||(o?{motionName:"".concat(t,"-").concat(o)}:i?{motionName:i}:null)}function P(e){var t=e.prefixCls,n=e.visible,i=e.zIndex,s=e.mask,a=e.maskMotion,r=e.maskAnimation,u=e.maskTransitionName;if(!s)return null;var l={};return(a||u||r)&&(l=Object(o.a)({motionAppear:!0},k({motion:a,prefixCls:t,transitionName:u,animation:r}))),c.createElement(y.b,Object.assign({},l,{visible:n,removeOnLeave:!0}),(function(e){var n=e.className;return c.createElement("div",{style:{zIndex:i},className:g()("".concat(t,"-mask"),n)})}))}var x=n(540),D=n(59),j=n.n(D),E=n(134),N=["measure","align",null,"motion"],H=c.forwardRef((function(e,t){var n=e.visible,i=e.prefixCls,s=e.className,a=e.style,r=e.children,u=e.zIndex,l=e.stretch,p=e.destroyPopupOnHide,h=e.align,d=e.point,m=e.getRootDomNode,v=e.getClassNameFromAlign,b=e.onAlign,O=e.onMouseEnter,T=e.onMouseLeave,C=e.onMouseDown,w=e.onTouchStart,P=Object(c.useRef)(),D=Object(c.useRef)(),H=Object(c.useState)(),S=Object(M.a)(H,2),V=S[0],A=S[1],R=function(e){var t=c.useState({width:0,height:0}),n=Object(M.a)(t,2),o=n[0],i=n[1];return[c.useMemo((function(){var t={};if(e){var n=o.width,i=o.height;-1!==e.indexOf("height")&&i?t.height=i:-1!==e.indexOf("minHeight")&&i&&(t.minHeight=i),-1!==e.indexOf("width")&&n?t.width=n:-1!==e.indexOf("minWidth")&&n&&(t.minWidth=n)}return t}),[e,o]),function(e){i({width:e.offsetWidth,height:e.offsetHeight})}]}(l),L=Object(M.a)(R,2),F=L[0],I=L[1];var B=function(e,t){var n=Object(c.useState)(null),o=Object(M.a)(n,2),i=o[0],s=o[1],a=Object(c.useRef)();function r(){f.a.cancel(a.current)}return Object(c.useEffect)((function(){s("measure")}),[e]),Object(c.useEffect)((function(){switch(i){case"measure":t()}i&&(a.current=Object(f.a)(Object(E.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=N.indexOf(i),(n=N[t+1])&&-1!==t&&s(n);case 3:case"end":return e.stop()}}),e)})))))}),[i]),Object(c.useEffect)((function(){return function(){r()}}),[]),[i,function(e){r(),a.current=Object(f.a)((function(){s((function(e){switch(i){case"align":return"motion";case"motion":return"stable"}return e})),null==e||e()}))}]}(n,(function(){l&&I(m())})),z=Object(M.a)(B,2),U=z[0],W=z[1],X=Object(c.useRef)();function Y(){var e;null===(e=P.current)||void 0===e||e.forceAlign()}function J(e,t){if("align"===U){var n=v(t);A(n),V!==n?Promise.resolve().then((function(){Y()})):W((function(){var e;null===(e=X.current)||void 0===e||e.call(X)})),null==b||b(e,t)}}var q=Object(o.a)({},k(e));function G(){return new Promise((function(e){X.current=e}))}["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach((function(e){var t=q[e];q[e]=function(e,n){return W(),null==t?void 0:t(e,n)}})),c.useEffect((function(){q.motionName||"motion"!==U||W()}),[q.motionName,U]),c.useImperativeHandle(t,(function(){return{forceAlign:Y,getElement:function(){return D.current}}}));var K=Object(o.a)(Object(o.a)(Object(o.a)({},F),{},{zIndex:u},a),{},{opacity:"motion"!==U&&"stable"!==U&&n?0:void 0,pointerEvents:"stable"===U?void 0:"none"}),Q=!0;!(null==h?void 0:h.points)||"align"!==U&&"stable"!==U||(Q=!1);var Z=r;return c.Children.count(r)>1&&(Z=c.createElement("div",{className:"".concat(i,"-content")},r)),c.createElement(y.b,Object.assign({visible:n,ref:D,leavedClassName:"".concat(i,"-hidden")},q,{onAppearPrepare:G,onEnterPrepare:G,removeOnLeave:p}),(function(e,t){var n=e.className,a=e.style,r=g()(i,s,V,n);return c.createElement(x.a,{target:d||m,key:"popup",ref:P,monitorWindowResize:!0,disabled:Q,align:h,onAlign:J},c.createElement("div",{ref:t,className:r,onMouseEnter:O,onMouseLeave:T,onMouseDown:C,onTouchStart:w,style:Object(o.a)(Object(o.a)({},a),K)},Z))}))}));H.displayName="PopupInner";var S=H,V=c.forwardRef((function(e,t){var n=e.prefixCls,i=e.visible,s=e.zIndex,a=e.children,r=e.mobile,u=(r=void 0===r?{}:r).popupClassName,l=r.popupStyle,p=r.popupMotion,f=void 0===p?{}:p,h=r.popupRender,d=c.useRef();c.useImperativeHandle(t,(function(){return{forceAlign:function(){},getElement:function(){return d.current}}}));var m=Object(o.a)({zIndex:s},l),v=a;return c.Children.count(a)>1&&(v=c.createElement("div",{className:"".concat(n,"-content")},a)),h&&(v=h(v)),c.createElement(y.b,Object.assign({visible:i,ref:d,removeOnLeave:!0},f),(function(e,t){var i=e.className,s=e.style,a=g()(n,u,i);return c.createElement("div",{ref:t,className:a,style:Object(o.a)(Object(o.a)({},s),m)},v)}))}));V.displayName="MobilePopupInner";var A=V,R=c.forwardRef((function(e,t){var n=e.visible,i=e.mobile,s=Object(C.a)(e,["visible","mobile"]),a=Object(c.useState)(n),r=Object(M.a)(a,2),u=r[0],l=r[1],p=Object(c.useState)(!1),f=Object(M.a)(p,2),h=f[0],d=f[1],m=Object(o.a)(Object(o.a)({},s),{},{visible:u});Object(c.useEffect)((function(){l(n),n&&i&&d(Object(w.a)())}),[n,!!i]);var v=h?c.createElement(A,Object.assign({},m,{mobile:i,ref:t})):c.createElement(S,Object.assign({},m,{ref:t}));return c.createElement("div",null,c.createElement(P,Object.assign({},m)),v)}));R.displayName="Popup";var L=R,F=c.createContext(null);function I(){}function B(){return""}function z(){return window.document}var U=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];var W,X;t.a=(W=b.a,(X=function(e){Object(r.a)(n,e);var t=Object(u.a)(n);function n(e){var o,s;return Object(i.a)(this,n),(o=t.call(this,e)).popupRef=c.createRef(),o.triggerRef=c.createRef(),o.onMouseEnter=function(e){var t=o.props.mouseEnterDelay;o.fireEvents("onMouseEnter",e),o.delaySetPopupVisible(!0,t,t?null:e)},o.onMouseMove=function(e){o.fireEvents("onMouseMove",e),o.setPoint(e)},o.onMouseLeave=function(e){o.fireEvents("onMouseLeave",e),o.delaySetPopupVisible(!1,o.props.mouseLeaveDelay)},o.onPopupMouseEnter=function(){o.clearDelayTimer()},o.onPopupMouseLeave=function(e){var t;e.relatedTarget&&!e.relatedTarget.setTimeout&&Object(h.a)(null===(t=o.popupRef.current)||void 0===t?void 0:t.getElement(),e.relatedTarget)||o.delaySetPopupVisible(!1,o.props.mouseLeaveDelay)},o.onFocus=function(e){o.fireEvents("onFocus",e),o.clearDelayTimer(),o.isFocusToShow()&&(o.focusTime=Date.now(),o.delaySetPopupVisible(!0,o.props.focusDelay))},o.onMouseDown=function(e){o.fireEvents("onMouseDown",e),o.preClickTime=Date.now()},o.onTouchStart=function(e){o.fireEvents("onTouchStart",e),o.preTouchTime=Date.now()},o.onBlur=function(e){o.fireEvents("onBlur",e),o.clearDelayTimer(),o.isBlurToHide()&&o.delaySetPopupVisible(!1,o.props.blurDelay)},o.onContextMenu=function(e){e.preventDefault(),o.fireEvents("onContextMenu",e),o.setPopupVisible(!0,e)},o.onContextMenuClose=function(){o.isContextMenuToShow()&&o.close()},o.onClick=function(e){if(o.fireEvents("onClick",e),o.focusTime){var t;if(o.preClickTime&&o.preTouchTime?t=Math.min(o.preClickTime,o.preTouchTime):o.preClickTime?t=o.preClickTime:o.preTouchTime&&(t=o.preTouchTime),Math.abs(t-o.focusTime)<20)return;o.focusTime=0}o.preClickTime=0,o.preTouchTime=0,o.isClickToShow()&&(o.isClickToHide()||o.isBlurToHide())&&e&&e.preventDefault&&e.preventDefault();var n=!o.state.popupVisible;(o.isClickToHide()&&!n||n&&o.isClickToShow())&&o.setPopupVisible(!o.state.popupVisible,e)},o.onPopupMouseDown=function(){var e;o.hasPopupMouseDown=!0,clearTimeout(o.mouseDownTimeout),o.mouseDownTimeout=window.setTimeout((function(){o.hasPopupMouseDown=!1}),0),o.context&&(e=o.context).onPopupMouseDown.apply(e,arguments)},o.onDocumentClick=function(e){if(!o.props.mask||o.props.maskClosable){var t=e.target,n=o.getRootDomNode(),i=o.getPopupDomNode();Object(h.a)(n,t)||Object(h.a)(i,t)||o.hasPopupMouseDown||o.close()}},o.getRootDomNode=function(){var e=o.props.getTriggerDOMNode;if(e)return e(o.triggerRef.current);try{var t=Object(d.a)(o.triggerRef.current);if(t)return t}catch(e){}return p.a.findDOMNode(Object(a.a)(o))},o.getPopupClassNameFromAlign=function(e){var t=[],n=o.props,i=n.popupPlacement,s=n.builtinPlacements,a=n.prefixCls,r=n.alignPoint,u=n.getPopupClassNameFromAlign;return i&&s&&t.push(function(e,t,n,o){for(var i=n.points,s=Object.keys(e),a=0;a<s.length;a+=1){var r=s[a];if(T(e[r].points,i,o))return"".concat(t,"-placement-").concat(r)}return""}(s,a,e,r)),u&&t.push(u(e)),t.join(" ")},o.getComponent=function(){var e=o.props,t=e.prefixCls,n=e.destroyPopupOnHide,i=e.popupClassName,s=e.onPopupAlign,a=e.popupMotion,r=e.popupAnimation,u=e.popupTransitionName,l=e.popupStyle,p=e.mask,f=e.maskAnimation,h=e.maskTransitionName,d=e.maskMotion,m=e.zIndex,v=e.popup,b=e.stretch,O=e.alignPoint,g=e.mobile,T=o.state,M=T.popupVisible,C=T.point,w=o.getPopupAlign(),y={};return o.isMouseEnterToShow()&&(y.onMouseEnter=o.onPopupMouseEnter),o.isMouseLeaveToHide()&&(y.onMouseLeave=o.onPopupMouseLeave),y.onMouseDown=o.onPopupMouseDown,y.onTouchStart=o.onPopupMouseDown,c.createElement(L,Object.assign({prefixCls:t,destroyPopupOnHide:n,visible:M,point:O&&C,className:i,align:w,onAlign:s,animation:r,getClassNameFromAlign:o.getPopupClassNameFromAlign},y,{stretch:b,getRootDomNode:o.getRootDomNode,style:l,mask:p,zIndex:m,transitionName:u,maskAnimation:f,maskTransitionName:h,maskMotion:d,ref:o.popupRef,motion:a,mobile:g}),"function"==typeof v?v():v)},o.attachParent=function(e){f.a.cancel(o.attachId);var t,n=o.props,i=n.getPopupContainer,s=n.getDocument,a=o.getRootDomNode();i?(a||0===i.length)&&(t=i(a)):t=s().body,t?t.appendChild(e):o.attachId=Object(f.a)((function(){o.attachParent(e)}))},o.getContainer=function(){var e=document.createElement("div");return e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",o.attachParent(e),e},o.setPoint=function(e){o.props.alignPoint&&e&&o.setState({point:{pageX:e.pageX,pageY:e.pageY}})},o.handlePortalUpdate=function(){o.state.prevPopupVisible!==o.state.popupVisible&&o.props.afterPopupVisibleChange(o.state.popupVisible)},s="popupVisible"in e?!!e.popupVisible:!!e.defaultPopupVisible,o.state={prevPopupVisible:s,popupVisible:s},U.forEach((function(e){o["fire".concat(e)]=function(t){o.fireEvents(e,t)}})),o}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e,t=this.props;if(this.state.popupVisible)return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(e=t.getDocument(),this.clickOutsideHandler=Object(v.a)(e,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(e=e||t.getDocument(),this.touchOutsideHandler=Object(v.a)(e,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(e=e||t.getDocument(),this.contextMenuOutsideHandler1=Object(v.a)(e,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=Object(v.a)(window,"blur",this.onContextMenuClose)));this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),f.a.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var e;return(null===(e=this.popupRef.current)||void 0===e?void 0:e.getElement())||null}},{key:"getPopupAlign",value:function(){var e=this.props,t=e.popupPlacement,n=e.popupAlign,i=e.builtinPlacements;return t&&i?function(e,t,n){var i=e[t]||{};return Object(o.a)(Object(o.a)({},i),n)}(i,t,n):n}},{key:"setPopupVisible",value:function(e,t){var n=this.props.alignPoint,o=this.state.popupVisible;this.clearDelayTimer(),o!==e&&("popupVisible"in this.props||this.setState({popupVisible:e,prevPopupVisible:o}),this.props.onPopupVisibleChange(e)),n&&t&&e&&this.setPoint(t)}},{key:"delaySetPopupVisible",value:function(e,t,n){var o=this,i=1e3*t;if(this.clearDelayTimer(),i){var s=n?{pageX:n.pageX,pageY:n.pageY}:null;this.delayTimer=window.setTimeout((function(){o.setPopupVisible(e,s),o.clearDelayTimer()}),i)}else this.setPopupVisible(e,n)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(e){var t=this.props.children.props,n=this.props;return t[e]&&n[e]?this["fire".concat(e)]:t[e]||n[e]}},{key:"isClickToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isContextMenuToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("contextMenu")||-1!==n.indexOf("contextMenu")}},{key:"isClickToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isMouseEnterToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseEnter")}},{key:"isMouseLeaveToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseLeave")}},{key:"isFocusToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("focus")}},{key:"isBlurToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("blur")}},{key:"forcePopupAlign",value:function(){var e;this.state.popupVisible&&(null===(e=this.popupRef.current)||void 0===e||e.forceAlign())}},{key:"fireEvents",value:function(e,t){var n=this.props.children.props[e];n&&n(t);var o=this.props[e];o&&o(t)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var e=this.state.popupVisible,t=this.props,n=t.children,i=t.forceRender,s=t.alignPoint,a=t.className,r=t.autoDestroy,u=c.Children.only(n),l={key:"trigger"};this.isContextMenuToShow()?l.onContextMenu=this.onContextMenu:l.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(l.onClick=this.onClick,l.onMouseDown=this.onMouseDown,l.onTouchStart=this.onTouchStart):(l.onClick=this.createTwoChains("onClick"),l.onMouseDown=this.createTwoChains("onMouseDown"),l.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(l.onMouseEnter=this.onMouseEnter,s&&(l.onMouseMove=this.onMouseMove)):l.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?l.onMouseLeave=this.onMouseLeave:l.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(l.onFocus=this.onFocus,l.onBlur=this.onBlur):(l.onFocus=this.createTwoChains("onFocus"),l.onBlur=this.createTwoChains("onBlur"));var p=g()(u&&u.props&&u.props.className,a);p&&(l.className=p);var f=Object(o.a)({},l);Object(m.c)(u)&&(f.ref=Object(m.a)(this.triggerRef,u.ref));var h,d=c.cloneElement(u,f);return(e||this.popupRef.current||i)&&(h=c.createElement(W,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!e&&r&&(h=null),c.createElement(F.Provider,{value:{onPopupMouseDown:this.onPopupMouseDown}},d,h)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.popupVisible,o={};return void 0!==n&&t.popupVisible!==n&&(o.popupVisible=n,o.prevPopupVisible=t.popupVisible),o}}]),n}(c.Component)).contextType=F,X.defaultProps={prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:B,getDocument:z,onPopupVisibleChange:I,afterPopupVisibleChange:I,onPopupAlign:I,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1},X)}}]);